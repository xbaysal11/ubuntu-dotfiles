{"version":3,"sources":["../../webpack/bootstrap","../.././node_modules/vary/index.js","../.././node_modules/@koa/cors/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","res","field","getHeader","setHeader","TypeError","val","header","Array","isArray","join","String","append","FIELD_NAME_REGEXP","fields","parse","j","length","test","vals","toLowerCase","indexOf","fld","push","end","list","start","len","charCodeAt","substring","vary","options","assign","allowMethods","exposeHeaders","allowHeaders","maxAge","credentials","keepHeadersOnError","undefined","async","ctx","next","requestOrigin","origin","Promise","headersSet","set","method","err","errHeadersSet","headers","varyWithOrigin","Vary","status"],"mappings":"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","file":"node_modules/@koa/cors.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 893);\n","/*!\n * vary\n * Copyright(c) 2014-2017 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict'\n\n/**\n * Module exports.\n */\n\nmodule.exports = vary\nmodule.exports.append = append\n\n/**\n * RegExp to match field-name in RFC 7230 sec 3.2\n *\n * field-name    = token\n * token         = 1*tchar\n * tchar         = \"!\" / \"#\" / \"$\" / \"%\" / \"&\" / \"'\" / \"*\"\n *               / \"+\" / \"-\" / \".\" / \"^\" / \"_\" / \"`\" / \"|\" / \"~\"\n *               / DIGIT / ALPHA\n *               ; any VCHAR, except delimiters\n */\n\nvar FIELD_NAME_REGEXP = /^[!#$%&'*+\\-.^_`|~0-9A-Za-z]+$/\n\n/**\n * Append a field to a vary header.\n *\n * @param {String} header\n * @param {String|Array} field\n * @return {String}\n * @public\n */\n\nfunction append (header, field) {\n  if (typeof header !== 'string') {\n    throw new TypeError('header argument is required')\n  }\n\n  if (!field) {\n    throw new TypeError('field argument is required')\n  }\n\n  // get fields array\n  var fields = !Array.isArray(field)\n    ? parse(String(field))\n    : field\n\n  // assert on invalid field names\n  for (var j = 0; j < fields.length; j++) {\n    if (!FIELD_NAME_REGEXP.test(fields[j])) {\n      throw new TypeError('field argument contains an invalid header name')\n    }\n  }\n\n  // existing, unspecified vary\n  if (header === '*') {\n    return header\n  }\n\n  // enumerate current values\n  var val = header\n  var vals = parse(header.toLowerCase())\n\n  // unspecified vary\n  if (fields.indexOf('*') !== -1 || vals.indexOf('*') !== -1) {\n    return '*'\n  }\n\n  for (var i = 0; i < fields.length; i++) {\n    var fld = fields[i].toLowerCase()\n\n    // append value (case-preserving)\n    if (vals.indexOf(fld) === -1) {\n      vals.push(fld)\n      val = val\n        ? val + ', ' + fields[i]\n        : fields[i]\n    }\n  }\n\n  return val\n}\n\n/**\n * Parse a vary header into an array.\n *\n * @param {String} header\n * @return {Array}\n * @private\n */\n\nfunction parse (header) {\n  var end = 0\n  var list = []\n  var start = 0\n\n  // gather tokens\n  for (var i = 0, len = header.length; i < len; i++) {\n    switch (header.charCodeAt(i)) {\n      case 0x20: /*   */\n        if (start === end) {\n          start = end = i + 1\n        }\n        break\n      case 0x2c: /* , */\n        list.push(header.substring(start, end))\n        start = end = i + 1\n        break\n      default:\n        end = i + 1\n        break\n    }\n  }\n\n  // final token\n  list.push(header.substring(start, end))\n\n  return list\n}\n\n/**\n * Mark that a request is varied on a header field.\n *\n * @param {Object} res\n * @param {String|Array} field\n * @public\n */\n\nfunction vary (res, field) {\n  if (!res || !res.getHeader || !res.setHeader) {\n    // quack quack\n    throw new TypeError('res argument is required')\n  }\n\n  // get existing header\n  var val = res.getHeader('Vary') || ''\n  var header = Array.isArray(val)\n    ? val.join(', ')\n    : String(val)\n\n  // set new header\n  if ((val = append(header, field))) {\n    res.setHeader('Vary', val)\n  }\n}\n","'use strict';\n\nconst vary = require('vary');\n\n/**\n * CORS middleware\n *\n * @param {Object} [options]\n *  - {String|Function(ctx)} origin `Access-Control-Allow-Origin`, default is request Origin header\n *  - {String|Array} allowMethods `Access-Control-Allow-Methods`, default is 'GET,HEAD,PUT,POST,DELETE,PATCH'\n *  - {String|Array} exposeHeaders `Access-Control-Expose-Headers`\n *  - {String|Array} allowHeaders `Access-Control-Allow-Headers`\n *  - {String|Number} maxAge `Access-Control-Max-Age` in seconds\n *  - {Boolean} credentials `Access-Control-Allow-Credentials`\n *  - {Boolean} keepHeadersOnError Add set headers to `err.header` if an error is thrown\n * @return {Function} cors middleware\n * @api public\n */\nmodule.exports = function(options) {\n  const defaults = {\n    allowMethods: 'GET,HEAD,PUT,POST,DELETE,PATCH',\n  };\n\n  options = Object.assign({}, defaults, options);\n\n  if (Array.isArray(options.exposeHeaders)) {\n    options.exposeHeaders = options.exposeHeaders.join(',');\n  }\n\n  if (Array.isArray(options.allowMethods)) {\n    options.allowMethods = options.allowMethods.join(',');\n  }\n\n  if (Array.isArray(options.allowHeaders)) {\n    options.allowHeaders = options.allowHeaders.join(',');\n  }\n\n  if (options.maxAge) {\n    options.maxAge = String(options.maxAge);\n  }\n\n  options.credentials = !!options.credentials;\n  options.keepHeadersOnError = options.keepHeadersOnError === undefined || !!options.keepHeadersOnError;\n\n  return async function cors(ctx, next) {\n    // If the Origin header is not present terminate this set of steps.\n    // The request is outside the scope of this specification.\n    const requestOrigin = ctx.get('Origin');\n\n    // Always set Vary header\n    // https://github.com/rs/cors/issues/10\n    ctx.vary('Origin');\n\n    if (!requestOrigin) return await next();\n\n    let origin;\n    if (typeof options.origin === 'function') {\n      origin = options.origin(ctx);\n      if (origin instanceof Promise) origin = await origin;\n      if (!origin) return await next();\n    } else {\n      origin = options.origin || requestOrigin;\n    }\n\n    const headersSet = {};\n\n    function set(key, value) {\n      ctx.set(key, value);\n      headersSet[key] = value;\n    }\n\n    if (ctx.method !== 'OPTIONS') {\n      // Simple Cross-Origin Request, Actual Request, and Redirects\n      set('Access-Control-Allow-Origin', origin);\n\n      if (options.credentials === true) {\n        set('Access-Control-Allow-Credentials', 'true');\n      }\n\n      if (options.exposeHeaders) {\n        set('Access-Control-Expose-Headers', options.exposeHeaders);\n      }\n\n      if (!options.keepHeadersOnError) {\n        return await next();\n      }\n      try {\n        return await next();\n      } catch (err) {\n        const errHeadersSet = err.headers || {};\n        const varyWithOrigin = vary.append(errHeadersSet.vary || errHeadersSet.Vary || '', 'Origin');\n        delete errHeadersSet.Vary;\n\n        err.headers = Object.assign({}, errHeadersSet, headersSet, { vary: varyWithOrigin });\n\n        throw err;\n      }\n    } else {\n      // Preflight Request\n\n      // If there is no Access-Control-Request-Method header or if parsing failed,\n      // do not set any additional headers and terminate this set of steps.\n      // The request is outside the scope of this specification.\n      if (!ctx.get('Access-Control-Request-Method')) {\n        // this not preflight request, ignore it\n        return await next();\n      }\n\n      ctx.set('Access-Control-Allow-Origin', origin);\n\n      if (options.credentials === true) {\n        ctx.set('Access-Control-Allow-Credentials', 'true');\n      }\n\n      if (options.maxAge) {\n        ctx.set('Access-Control-Max-Age', options.maxAge);\n      }\n\n      if (options.allowMethods) {\n        ctx.set('Access-Control-Allow-Methods', options.allowMethods);\n      }\n\n      let allowHeaders = options.allowHeaders;\n      if (!allowHeaders) {\n        allowHeaders = ctx.get('Access-Control-Request-Headers');\n      }\n      if (allowHeaders) {\n        ctx.set('Access-Control-Allow-Headers', allowHeaders);\n      }\n\n      ctx.status = 204;\n    }\n  };\n};\n"],"sourceRoot":""}